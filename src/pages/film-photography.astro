---
import Layout from '../layouts/Layout.astro';
import { albums } from '../data/albums';
---

<Layout title="Film Photography | Emma">
  <style is:global>
    /* Light mode */
    .light-mode .film-page {
      background-color: #FAF7F2;
    }
    .light-mode .film-title {
      color: #162617;
    }
    .light-mode .film-description {
      color: #1a1a1a;
    }
    .light-mode .btn-back-film {
      background-color: #162617;
      color: #FAF7F2;
      border: 2px solid #162617;
    }
    .light-mode .btn-back-film:hover {
      background-color: #eeffac;
      color: #162617;
      border-color: #eeffac;
    }
    .light-mode .album-overlay {
      background: rgba(22, 38, 23, 0.7);
    }

    /* Dark mode */
    .dark-mode .film-page {
      background-color: #162617;
    }
    .dark-mode .film-title {
      color: #eeffac;
    }
    .dark-mode .film-description {
      color: #FAF7F2;
    }
    .dark-mode .btn-back-film {
      background-color: transparent;
      color: #eeffac;
      border: 2px solid #eeffac;
    }
    .dark-mode .btn-back-film:hover {
      background-color: #eeffac;
      color: #162617;
    }
  </style>

  <!-- Content -->
  <div class="film-page" style="min-height: 100vh;">
    <div class="film-layout" style="display: grid; grid-template-columns: 340px 1fr;">

      <!-- Left Column - Button, Title and Description -->
      <div class="film-text" style="padding: 2rem 2rem 2rem; position: sticky; top: 0; height: fit-content;">
        <a href="/" class="btn-back-film font-medium" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.6rem 1.5rem; border-radius: 50px; font-size: 0.9rem; text-decoration: none; transition: all 0.2s; margin-bottom: 2rem;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back
        </a>
        <h1 class="film-title font-[family-name:var(--font-display)] text-3xl md:text-4xl mb-4">
          Film Photography
        </h1>
        <p class="film-description text-base mb-4">
          In a world of instant gratification, film photography is my reminder to slow down. To be present, to be intentional, and to notice things that I might normally overlook.
        </p>
        <p class="film-description text-base">
          This is a collection of my favorite moments captured on film. Shot on my Canon AE-1, organized by location.
        </p>
      </div>

      <!-- Right Column - Album Grid -->
      <div class="film-albums" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; align-content: start; padding: 2rem 1rem 3rem 0;">
        {albums.map((album, index) => (
          <div
            class="album-container"
            data-album-index={index}
            data-interval={album.interval}
            data-slug={album.slug}
            style="position: relative; aspect-ratio: 1; overflow: hidden; cursor: pointer; background-color: #EDE8E0; border-radius: 1rem;"
          >
            {album.photos.map((photo, photoIndex) => (
              <img
                src={photo}
                alt={`${album.title} photo ${photoIndex + 1}`}
                class="album-photo"
                data-photo-index={photoIndex}
                loading="lazy"
                style={`position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; opacity: ${photoIndex === 0 ? 1 : 0}; transition: opacity 0.8s ease-in-out;${photoIndex === 0 && album.coverPosition ? ` object-position: ${album.coverPosition};` : ''}`}
              />
            ))}

            <!-- Hover overlay with location -->
            <div class="album-overlay">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="#eeffac" stroke="#eeffac" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                <circle cx="12" cy="10" r="3" fill="#162617"></circle>
              </svg>
              <span style="color: #eeffac; font-size: 0.9rem; font-weight: 500;">{album.title}</span>
            </div>
          </div>
        ))}
      </div>

    </div>
  </div>

</Layout>

<script>
  document.querySelectorAll('.album-container').forEach((container) => {
    container.addEventListener('click', () => {
      const slug = container.dataset.slug;
      window.location.href = `/film/${slug}`;
    });
  });
</script>

<style>
  .album-container {
    transition: transform 0.3s ease;
  }

  .album-container:hover {
    transform: scale(1.02);
  }

  .album-photo {
    image-orientation: from-image;
  }

  .album-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(22, 38, 23, 0.6);
    border-radius: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .album-container:hover .album-overlay {
    opacity: 1;
  }

  /* Custom cursor for entire page */
  .album-container, .album-container * {
    cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cpath d='M5 3l14 9-6 1 4 7-2 1-4-7-4 5z' fill='%23eeffac' stroke='%23162617' stroke-width='1.5' stroke-linejoin='round'/%3E%3C/svg%3E") 0 0, auto !important;
  }

  @media (max-width: 768px) {
    .film-layout {
      grid-template-columns: 1fr !important;
    }
    .film-text {
      position: static !important;
      padding: 1.5rem !important;
    }
    .film-albums {
      grid-template-columns: repeat(2, 1fr) !important;
      padding: 0 1.5rem 2rem 1.5rem !important;
    }
  }
</style>
